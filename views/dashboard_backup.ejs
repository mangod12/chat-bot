<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>

    <style media="screen">
    /* Chatter Bot */
    .body{
      /*background-image: url("frontend/img/background-home.jpg");*/
      font-family: "proxima-nova", "Source Sans Pro", sans-serif;
      font-size: 18px;
    }
    .img-header-chatter-bot-header{
      border-radius: 50%;
      padding: 20px;
      width: 90px;
      margin:0 auto;
      text-align:center;
      position:relative;
      float:center;
    }
    .name-header-chatter-bot-header{
      color: white;
    }
    .img-header-chatter-bot-header-sender{
      border-radius: 50%;
      padding: 20px;
      width: 90px;
      margin:0 auto;
      margin-left: 35px;
      text-align:center;
      position:relative;
      float:center;
    }
    .name-header-chatter-bot-header-sender{
      color: white;
      margin:0 auto;
      text-align:center;
      position:relative;
      float:center;
    }
    .personal-chat-list{
      margin-top: 10px;
      color: white;
      overflow: scroll;
      overflow-x: hidden;
      height: 350px;
    }
    .img-body-chatter-bot-large{
      border-radius: 50%;
      padding: 10px;
      width: 60px;
      margin:0 auto;
      margin-left: 10px;
      text-align:center;
      position:relative;
      float:center;
    }
    .personal-chat-active{
      background: #29373d;
    }
    .personal-chat{
      color: white;
      cursor: pointer;
    }
    .personal-chat:hover{
      background: #29373d;
      color: white;
    }
    .personal-chat-message{
      color: white;
      overflow: scroll;
      overflow-x: hidden;
      height: 360px;
      background: #d9d9d9;
    }
    .sender{
      margin-left:-40px;
      display: inline-block;
      clear: both;
      float: left;
      padding: 0px;
      width: calc(100% - 25px);
      font-size: 0.9em;
    }
    .sender .img-sender{
      float: left;
      width: 25px;
      margin-right: 10px;
    }
    .sender .chat-sender{
      float: left;
      display: inline-block;
      padding: 10px 15px;
      border-radius: 20px;
      max-width: 300px;
      line-height: 100%;
      background: #fff;
      color: #262626;
      word-wrap: break-word;
      letter-spacing: 0.1px;
      line-height: 1.3;
      font-size:16px;
    }
    .receiver{
      display: inline-block;
      clear: both;
      float: right;
      padding: 0px;
      width: calc(100% - 25px);
      font-size: 0.9em;
    }
    .receiver .img-receiver{
      float: right;
      width: 25px;
      margin-left: 10px;
    }
    .receiver .chat-receiver{
      float: right;
      display: inline-block;
      padding: 10px 15px;
      border-radius: 20px;
      max-width: 300px;
      line-height: 100%;
      background: #dcf8c6;
      color: #262626;
      word-break: break-word;
      letter-spacing: 0.1px;
      line-height: 1.3;
      font-size:16px;
    }
    .panel-typing-and-sending{
      padding: 5px;
      background: #e6e6e6;
      height:42px;
    }
    /* ./Chat Bot */
    </style>

  </head>
  <body>

       <%- include header %>
       <!-- Main component for a primary marketing message or call to action -->
          <div class="jumbotron">
            <h1>Welcome</h1>
            <table class="table table-user-information">
              <tbody>
              </tbody>
            </table>
            <p>Hello Dashboard</p>
            <p>
              <a class="btn btn-lg btn-primary" href="/home/profile" role="button">Profile view Â»</a>
            </p>

            <div class="container chat">
              <div class="row">
                <div class="col-lg-4 col-xs-2" style="background:#222d32;">
                  <div class="row">
                    <div class="col-lg-12">
                      <img class="img-header-chatter-bot-header" src="frontend/img/logo2.png" alt="User Image">
                      <b class="name-header-chatter-bot-header"> Aplikasi ChatBot MAN YK 2</b>
                      <div class="row">
                        <div class="col-lg-12" style="padding:0px;">
                          <div class="input-group">
                            <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-search"></span></span>
                            <input type="text" class="form-control" placeholder="Cari Pengguna.." aria-describedby="basic-addon1">
                          </div>
                        </div>
                      </div>
                      <div class="row personal-chat-list">
                        <div class="col-lg-12 personal-chat personal-chat-active" style="margin-top:0px;padding:5px;">
                          <div class="row">
                            <div class="col-lg-2">
                              <img class="img-body-chatter-bot-large" src="frontend/img/chatbot.jpg" alt="User Image">
                            </div>
                            <div class="col-lg-10">
                              <div class="row" style="padding:7px;">
                                <div class="col-lg-12">
                                  <b class="">Bot Siswa MAN YK 2</b>
                                </div>
                                <div class="col-lg-12 history-chat-body">
                                  <p>asd</p>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-12 personal-chat" style="margin-top:0px;padding:5px;">
                          <div class="row">
                            <div class="col-lg-2">
                              <img class="img-body-chatter-bot-large" src="frontend/img/chatbot.jpg" alt="User Image">
                            </div>
                            <div class="col-lg-10">
                              <div class="row" style="padding:7px;">
                                <div class="col-lg-12">
                                  <b class="">Bot Siswa MAN YK 2</b>
                                </div>
                                <div class="col-lg-12 history-chat-body">
                                  <p>asd</p>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-8 col-xs-10" style="background:#f2f2f2">
                  <div class="row">
                    <div class="col-lg-12" style="background:#00a65a;">
                      <img class="img-header-chatter-bot-header-sender" src="frontend/img/chatbot.jpg" alt="User Image">
                      <b class="name-header-chatter-bot-header-sender" style="color:#fff"> Bot</b>
                    </div>
                    <div class="col-lg-12 personal-chat-message" style="margin-top:10px;">
                      <ul>
                      <%
                      if(data.length){
                        for(var i = 0;i < data.length;i++) { %>
                          <li class="sender">
                            <img class="img-sender" src="frontend/img/chatbot.jpg" alt="User Image">
                            <p class="chat-sender"><%=data[i].isi_pesan_chat_pengguna%></p>
                          </li>
                          <li class="receiver">
                            <img class="img-receiver" src="frontend/img/chatbot.jpg" alt="User Image">
                            <p class="chat-receiver"><%=data[i].isi_pesan_chat_pengguna%></p>
                          </li>
                          <%
                        }
                      }
                      else { %>
                       <tr>
                          <td colspan="3">No user</td>
                       </tr>
                      <% } %>
                      </ul>
                    </div>
                    <div class="col-lg-12 panel-typing-and-sending">
                      <form id="chat-form" method="post" action="/home/dashboard/chat">
                        <div class="input-group">
                          <input class="form-control input-send-message" name="pengirim_pesan_chat_pengguna" id="pengirim_pesan_chat_pengguna" type="hidden" value="<%=session%>">
                          <input class="form-control input-send-message" name="isi_pesan_chat_pengguna" id="isi_pesan_chat_pengguna" type="text" placeholder="Kirim Pesan....">
                          <span class="input-group-btn">
                            <button class="btn btn-default button-send-message" id="tombol-kirim-pesan" type="submit"><span class="glyphicon glyphicon-send"></span></button>
                          </span>
                        </div>
                      </form>
                      <!-- <form method="post" action="/home/dashboard/chat">
                          <table cellpadding="11">
                          <tr>
                              <td class="label">Name</td><td>: <input type="text" name="name" required></td>
                           </tr>
                           <tr>
                              <td class="label" valign="top">Address</td><td valign="top">: <textarea name="address" required cols="30" rows="5"></textarea></td>
                          </tr>
                          <tr>
                              <td class="label">Email</td><td>: <input type="text" name="email" required></td>
                           </tr>
                            <tr>
                              <td class="label">Phone</td><td>: <input type="text" name="phone" required></td>
                           </tr>
                           <tr>
                              <td class="label"></td>
                              <td>
                                  &nbsp; <input type="submit" name="submit" value="Save">
                                 <input type="button" name="cancel" value="Cancel" class="cancel" onClick="cancelAdd()">
                              </td>
                           </tr>
                          </table>
                      </form> -->
                    </div>
                  </div>
                </div>
              </div>
            </div> <!--col-lg-12-->


          </div>
        <%- include footer %>

  <script type="text/javascript">
    $(document).ready(function() {

      function newMessage() {
        var message = $("#isi_pesan_chat_pengguna").val();
        if($.trim(message) == '') {
          return false;
        }
        $('<li class="receiver"><img class="img-receiver" src="frontend/img/chatbot.jpg" alt="" /><p class="chat-receiver">' + message + '</p></li>').appendTo($('.personal-chat-message ul'));
        $('#isi_pesan_chat_pengguna').val(null);
        $('.history-chat-body').html('<span>You: </span>' + message);
        $(".personal-chat-message").animate({scrollTop: $('.personal-chat-message').get(0).scrollHeight}, 1000);
      };
      $('#tombol-kirim-pesan').click(function(event) {
        event.preventDefault();
        $.ajax({
           type: "POST",
           url: "/home/dashboard/chat",
           data: $("#chat-form").serialize(), // serializes the form's elements.
           success: function(data){
             console.log(data); // show response from the php script.
           }
         });
         newMessage();
      });
      $('.isi_pesan_chat_pengguna').keypress(function(event) {
        if (e.keyCode == 13) {
          event.preventDefault();
          $.ajax({
             type: "POST",
             url: "/home/dashboard/chat",
             data: $("#chat-form").serialize(), // serializes the form's elements.
             success: function(data){
               console.log(data); // show response from the php script.
             }
           });
          // newMessage();
        }
      });

      // // Chatbot
      // $('#chat-form').on('submit', function(event){
        // event.preventDefault();
        // $.ajax({
        //    type: "POST",
        //    url: "/home/dashboard/chat",
        //    data: $("#chat-form").serialize(), // serializes the form's elements.
        //    success: function(data){
        //      console.log(data); // show response from the php script.
        //    }
        //  });
      // });
      // ./Chatbot

    });
  </script>

  </body>
</html>
